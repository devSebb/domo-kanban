<div>
  <%= form_with model: @organization, local: true do |f| %>
    <div class="flex flex-col w-1/2 mx-auto my-10">
      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :description %>
      <%= f.text_area :description %>

      <h3>Invite User</h3>
      <%= f.fields_for :memberships, @organization.memberships.build do |m| %>
        <%= m.label :user_id, "Invite Member" %>
        <%= m.collection_select :user_id, User.all, :id, :email, prompt: "Select a user" %>

        <%= m.label :role %>
        <%= m.select :role, Membership.roles.keys.map { |role| [role.humanize, role] }, prompt: "Select a role" %>
      <% end %>

      <%= f.submit "Create Organization and Invite User" %>
    </div>
  <% end %>
</div>
